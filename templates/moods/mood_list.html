{% extends 'base.html' %}

{% block content %}

    <h1 class="mb-4">Our Daily Moods</h1>

    <p>
        <a href="{% url 'moods:create' %}" class="btn btn-soft">Add new day to my diary</a>
    </p>

    <form method="get" class="mb-4">

        <!-- by Cat filtering -->
        <div class="mb-3">
            <label for="cat" class="form-label">Filter by cat:</label>
            <select name="cat" id="cat" class="form-select">
                <option value="">All Cats</option>

                {% for cat in cats %}
                    <option value="{{ cat.id }}"
                            {% if selected_cat == cat.id|stringformat:"s" %}
                            selected
                            {% endif %}
                    >
                        {{ cat.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- by Mood filtering -->
        <div class="mb-3">
            <label for="mood" class="form-label">Filter by mood:</label>
            <select name="mood" id="mood" class="form-select">
                <option value="">All Moods</option>

                {% for value, label in mood_choices %}
                    <option value="{{ value }}"
                            {% if selected_mood == value %}
                            selected
                            {% endif %}
                    >
                        {{ label }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-soft">Filter</button>

        {% if has_filters %}
            <a href="{% url 'moods:list' %}" class="btn btn-outline-secondary ms-2">Clear Filters</a>
        {% endif %}

    </form>

    {% if moods %}
        <ul class="list-group">

            {% for mood in moods %}
                <li class="list-group-item d-flex justify-content-between align-items-center">

                    <div>
                        <a href="{% url 'moods:detail' mood.pk %}" class="text-decoration-none">{{ mood.date }}
                            â€“ {{ mood.mood }}</a>
                        <small class="text-muted">({{ mood.cat.name }})</small>
                    </div>

                </li>
            {% endfor %}

        </ul>
    {% else %}
        <p>No diary entries yet.</p>
    {% endif %}

    <div class="mt-4">{% include 'common/pagination.html' %}</div>

{% endblock %}
